version: 2.1

setup: true

orbs:
  path_filtering: circleci/path-filtering@2.0.0

workflows:
  filter:
    jobs:
      - path_filtering/filter:
          mapping: |
            .circleci/.* docker true
            Makefile docker true
            scripts/include.mk docker true
            docker/.* docker true

            .circleci/.* go true
            Makefile go true
            scripts/include.mk go true
            docker/.* go true

            .circleci/.* k8s true
            Makefile k8s true
            scripts/include.mk k8s true
            docker/.* k8s true

            .circleci/.* monitoror true
            Makefile monitoror true
            scripts/include.mk monitoror true
            monitoror/.* monitoror true

            .circleci/.* release true
            Makefile release true
            scripts/include.mk release true
            release/.* release true

            .circleci/.* root true
            Makefile root true
            scripts/include.mk root true
            root/.* root true
          base-revision: origin/master
          resource_class: large
